server:
  url: http://localhost:7111

# Run these everywhere.
run:
  - extract-slug-source
  - extract-label-string
  - extract-thumbnail
  - manifest-sqlite
  - metadata-analysis

stores:
  manifests:
    type: iiif-json
    path: ./content
    subFiles: true
    ignore:
      - content/objects/**/*
      - content/manifests/*
      - content/topics/**/*
    pattern: "**/*.json"
    destination: manifests
    base: ./content

  delft:
    type: iiif-json
    path: ./delft
    pattern: "**/*.json"
    run:
      - delft-labels
      - extract-thumbnail
      - manifest-sqlite
      - extract-topics
    config:
      extract-topics:
        commaSeparated: ['material']
        topicTypes:
          material: [ 'Materiaal', 'Material' ]

  bridges:
    type: iiif-remote
    url: https://view.nls.uk/collections/7446/74466699.json
    overrides: ./content
    saveManifests: true
    slugTemplates:
      - nls-manifests
      - nls-collections

    # Skip these for this store.
    skip:
      - extract-canvas-dims

    # But additionally run these.
    run:
      - canvas-thumbnail
      - extract-thumbnail
      - manifest-sqlite


  hutton:
    type: iiif-remote
    url: https://view.nls.uk/collections/7446/74466682.json
    overrides: ./content
    slugTemplates:
      - nls-manifests
      - nls-collections

  wellcomePaintings:
    type: iiif-remote
    url: https://iiif.wellcomecollection.org/presentation/collections/digitalcollections/digpaintings
    slugTemplates:
      - wellcome-manifest
      - wellcome-collection
      - wellcome-paged-collection
    run:
      - extract-topics
    config:
      extract-topics:
        topicTypes:
          technique: ['Type/technique']
          subjects: ['Subjects']

config:
  extract-label-string:
    language: en

  manifest-sqlite:
    enableTopics: true

slugs:
  wellcome-manifest:
    type: Manifest
    prefix: https://iiif.wellcomecollection.org/
    pattern: /presentation/:id
    slugTemplate: wellcome/manifests/:id
    examples:
      - https://iiif.wellcomecollection.org/presentation/b30496974

  wellcome-collection:
    type: Collection
    prefix: https://iiif.wellcomecollection.org/
    pattern: /presentation/collections/:a/:b?
    slugTemplate: wellcome/collections/:a/:b?
    examples:
      - https://iiif.wellcomecollection.org/presentation/collections/digitalcollections/digpaintings

  wellcome-paged-collection:
    type: Collection
    prefix: https://iiif.wellcomecollection.org/
    pattern: /presentation/collections/:a/:b/paged/:c
    slugTemplate: wellcome/collections/:a/:b/:c
    examples:
      - https://iiif.wellcomecollection.org/presentation/collections/digitalcollections/digpaintings/paged/1-100

  nls-manifests:
    type: Manifest
    prefix: https://view.nls.uk/manifest/
    pattern: /:id1/:id2/manifest.json
    slugTemplate: manifests/nls-:id1-:id2
    examples:
      - https://view.nls.uk/manifest/7446/74464117/manifest.json

  nls-collections:
    type: Collection
    prefix: https://view.nls.uk/collections/
    pattern: /:id1/:id2.json
    slugTemplate: collections/nls-:id1-:id2
    examples:
      - https://view.nls.uk/collections/7446/74466699.json

